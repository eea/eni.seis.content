<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">

<body>
<metal:main fill-slot="main">
  <div id="content-core">

    <h1 id="parent-fieldname-title" class="documentFirstHeading"
        tal:content="context/Title">
      Photo gallery title
    </h1>

    <div class="documentDescription" tal:content="context/Description">
      Photo gallery description
    </div>

    <div tal:replace="structure context/long_description" />

    <div class="photo-gallery-container"
         tal:define="images python:context.getFolderContents(contentFilter={'portal_type':['Image']});
                     images_per_row python:3;
                     images_rows python:[images[i:i+images_per_row] for i in range(0, len(images), images_per_row)];">

      <tal:rows tal:repeat="images_columns python:images_rows">
        <div class="row">
          <tal:columns tal:repeat="image python:images_columns">
            <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 land-publication-item"
                 tal:define="image_obj python:image.getObject();
                             image_title python:image_obj.Title();
                             image_url python:image_obj.absolute_url();
                             image_view_url python:image_obj.absolute_url() + '/view';
                             image_cover_img python:image_url + '/image';">

              <div class="photo-item">
                <a href=""
                   tal:attributes="href python:image_view_url">
                  <img src="" alt="" title=""
                       tal:attributes="src python:image_cover_img;
                                       alt python:image_title">
                </a>
              </div>

              <h3 class="photo-description" tal:content="python:image_title">Nice image</h3>
            </div>
          </tal:columns>
        </div>
      </tal:rows>
    </div>
  </div>
</metal:main>

</body>
</html>
