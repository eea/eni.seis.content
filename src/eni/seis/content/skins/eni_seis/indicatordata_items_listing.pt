<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">

<head>
</head>

<body>
<metal:main fill-slot="main">
  <div id="content-core"
      tal:define="path context/@@plone_portal_state/navigation_root_path;
                  results python:context.portal_catalog.searchResults(dict(
                    portal_type='indicatordata',
                    sort_order='ascending',
                    review_state='published',
                    path=path));
                  results python:[r for r in results if r.getObject()];
                  Batch python:modules['Products.CMFPlone'].Batch;
                  b_start python:request.get('b_start',0);
                  home_url python:context.portal_membership.getHomeUrl;
                  isAnon context/@@plone_portal_state/anonymous;
                  portal context/@@plone_portal_state/portal;
                  show_about python:not isAnon or context.portal_properties.site_properties.allowAnonymousViewAbout">

    <h1 class="eni-seis-title" i18n:translate="">Indicators</h1>

    <form name="searchresults" action="" method="post" tal:condition="results"
          tal:define="batch python:Batch(results, 15, int(b_start), orphan=1);
                      toLocalizedTime nocall: context/@@plone/toLocalizedTime;">

      <metal:block tal:repeat="result batch">

        <div class="indicatordata clearfix"
             metal:define-macro="listitem"
             tal:define="resultObject result/getObject;
                        creator result/Creator;
                        resulturl resultObject/absolute_url;">
          <a tal:attributes="href python:resultObject.absolute_url()">
            <span tal:replace="python:resultObject.Title()"></span>
          </a>
          <!-- [TODO] WIP -->
        </div>
      </metal:block>

      <div metal:use-macro="context/batch_macros/macros/navigation" />

    </form>
  </div>
</metal:main>
</body>
</html>
